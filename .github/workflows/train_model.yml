name: Entrena el modelo y lo registra en MLFlow
on:
  [workflow_dispatch]
jobs:

  #train:
  #  runs-on: ubuntu-latest
  #  steps:
  #    - name: Prepara el entrenamiento
  #      uses: actions/checkout@v2
  #    - name: Configura el entorno de Python
  #      uses: actions/setup-python@v2
  #      with:
  #        python-version: "3.8"
  #    - name: Instala las dependencias
  #      run: |
  #        python -m pip install --upgrade pip
  #        pip install -r ./requirements.txt
  #    - name: Ejecuta el Script de Entrenamiento
  #      run: |
  #        python src/train.py
  serving:
    #needs: train
    runs-on: ubuntu-latest
    steps:
      - name: Prepara el entorno de servicio de API
        uses: actions/checkout@v2
      - name: Configura el entorno de Python
        uses: actions/setup-python@v2
        with:
          python-version: "3.8"
      - name: Prepara el API de Servicio para ser consumido v√≠a REST por los clientes
        run: |
          python -m pip install --upgrade pip
          pip install --upgrade -r ./requirements.txt
      - name: Ejecuta el Servicio
        run: |
          python src/main.py